<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>æ—¥æœˆæ˜Ÿå åœç³»çµ±</title>
  <style>
    body { font-family: sans-serif; background: linear-gradient(to bottom, #111, #333); color: white; text-align: center; padding: 2em; }
    h1 { font-size: 2em; margin-bottom: 1em; }
    select, button, input { margin: 0.5em; padding: 0.5em; font-size: 1em; }
    .result { margin-top: 2em; white-space: pre-wrap; background: #222; padding: 1em; border-radius: 10px; }
  </style>
</head>
<body>
  <h1>ğŸ”® æ—¥æœˆæ˜Ÿå åœç³»çµ±</h1>

  <label>ä½ çš„ OpenAI API é‡‘é‘°ï¼š</label>
  <input type="password" id="apiKey" placeholder="sk-xxxxxxxxxxxx" size="40" /><br />

  <label>å åœä¸»é¡Œï¼š</label>
  <select id="topic">
    <option value="æ„Ÿæƒ…">æ„Ÿæƒ…</option>
    <option value="äº‹æ¥­">äº‹æ¥­</option>
    <option value="ç¶œåˆ">ç¶œåˆ</option>
  </select><br />

  <label>é¸æ“‡å¼µæ•¸ï¼š</label>
  <select id="cardCount">
    <option value="3">3 å¼µ</option>
    <option value="5">5 å¼µ</option>
  </select><br />

  <button onclick="drawCards()">æŠ½ç‰Œä¸¦å åœ</button>

  <div class="result" id="result"></div>

  <script>
    const cards = [
      "é­”æ³•æ›¸ç‰Œ", "å‰ä¸–ç‰Œ", "è»Šå­ç‰Œ", "æˆ¿å­ç‰Œ", "æ™ºæ…§ç‰Œ", "ç³¾çµç‰Œ",
      "å°å·ç‰Œ", "é±·é­šç‰Œ", "è²“å’ªç‰Œ", "åˆ€ç‰Œ", "åºŠç‰Œ", "è€é·¹ç‰Œ",
      "å¬°å…’ç‰Œ", "ç‹¼ç‰Œ", "ç…å­ç‰Œ", "æ˜Ÿæ˜Ÿç‰Œ", "å¯©åˆ¤ç‰Œ", "ç‹—ç‹—ç‰Œ",
      "æ³•é™¢ç‰Œ", "èŠ±åœ’ç‰Œ", "ä¼‘æ­¢ç¬¦ç‰Œ", "é¸æ“‡è·¯å£ç‰Œ", "è€é¼ ç‰Œ", "æ„›å¿ƒç‰Œ",
      "æ˜¥å¤©ç‰Œ", "åº¦å‡æ‘ç‰Œ", "ä¿¡å°ç‰Œ", "ç”·äººç‰Œ", "å¥³äººç‰Œ", "éŒ¢å¹£è¢‹ç‰Œ",
      "å¤ªé™½ç‰Œ", "æœˆäº®ç‰Œ", "è±ç››ç‰Œ", "ç¨»ç±³ç‰Œ", "å¤å¤©ç‰Œ", "æ¥­åŠ›ç‰Œ",
      "ç§‹å¤©ç‰Œ", "å†¬å¤©ç‰Œ", "çµæ§ç‰Œ", "ç«çˆç‰Œ", "å…”å­ç‰Œ", "å»Ÿå®‡ç‰Œ",
      "æ•™å ‚ç‰Œ", "å¤©ä½¿ç‰Œ", "æƒ¡é­”ç‰Œ", "ç±³é£¯ç‰Œ", "å†¥æƒ³ç‰Œ", "éŸ³ç¬¦ç‰Œ",
      "æ‰‹æ©Ÿç‰Œ", "è£‚å¿ƒç‰Œ"
    ];

    async function drawCards() {
      const apiKey = document.getElementById("apiKey").value.trim();
      const count = parseInt(document.getElementById("cardCount").value);
      const topic = document.getElementById("topic").value;
      const resultDiv = document.getElementById("result");

      if (!apiKey) return alert("è«‹è¼¸å…¥ä½ çš„ API é‡‘é‘°ã€‚");

      // æŠ½ç‰Œ
      const drawn = [...cards].sort(() => 0.5 - Math.random()).slice(0, count);
      const prompt = `ä½ æ˜¯ä¸€ä½æ—¥æœˆæ˜Ÿå åœå¸«ï¼Œè«‹æ ¹æ“šä»¥ä¸‹ç‰Œç¾©èˆ‡é‚è¼¯ï¼ˆä¸éœ€è§£é‡‹ï¼‰ï¼Œé‡å°ã€Œ${topic}ã€ä¸»é¡Œé€²è¡Œç¶œåˆè§£è®€ï¼š\næŠ½åˆ°çš„ç‰Œç‚ºï¼š${drawn.join("ã€")}ã€‚è«‹çµ¦å‡ºä¸€æ®µ GPT é¢¨æ ¼ã€æœ‰éˆæ€§æ·±åº¦çš„å åœåˆ†æã€‚`;

      resultDiv.textContent = "ğŸ”® å åœä¸­ï¼Œè«‹ç¨å€™...";

      try {
        const res = await fetch("https://api.openai.com/v1/chat/completions", {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
            "Authorization": `Bearer ${apiKey}`
          },
          body: JSON.stringify({
            model: "gpt-4",
            messages: [{ role: "user", content: prompt }]
          })
        });

        const data = await res.json();
        if (data.choices && data.choices.length > 0) {
          resultDiv.innerHTML = `<strong>ä½ æŠ½åˆ°çš„ç‰Œï¼š</strong><br>${drawn.join("ã€")}<br><br><strong>å åœçµæœï¼š</strong><br>${data.choices[0].message.content}`;
        } else {
          resultDiv.textContent = "å–å¾—å åœçµæœå¤±æ•—ï¼Œè«‹ç¢ºèªé‡‘é‘°æ˜¯å¦æ­£ç¢ºã€‚";
        }
      } catch (e) {
        resultDiv.textContent = "ç™¼ç”ŸéŒ¯èª¤ï¼Œè«‹æª¢æŸ¥ç¶²è·¯æˆ–é‡‘é‘°ã€‚";
      }
    }
  </script>
</body>
</html>
